{% extends 'note/base.html' %}
{% block content %}
<h3>Chat with {{ receiver.username }}</h3>
<div class="border p-3 mb-3" style="height:400px; overflow-y:scroll;" id="chat-box">
    {% for msg in msgs %}
        {% if msg.sender == user %}
            <div class="text-end mb-2">
                <span class="badge bg-primary">{{ msg.text }}</span>
            </div>
        {% else %}
            <div class="text-start mb-2">
                <span class="badge bg-secondary">{{ msg.text }}</span>
            </div>
        {% endif %}
    {% endfor %}
</div>

<form method="POST">
    {% csrf_token %}
    <div class="input-group">
        <input type="text" name="text" class="form-control" placeholder="Type a message..." required>
        <button class="btn btn-primary" type="submit">Send</button>
    </div>
</form>

<script>
    // Auto scroll chat
    var chatBox = document.getElementById('chat-box');
    chatBox.scrollTop = chatBox.scrollHeight;
</script>
{% endblock %}
