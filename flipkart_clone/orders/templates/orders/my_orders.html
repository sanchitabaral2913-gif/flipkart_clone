{% extends 'base.html' %}
{% block content %}

<div class="container mt-4">
    <h3 class="mb-4">My Orders</h3>

    {% for order in orders %}
        <div class="card mb-3 shadow-sm">
            <div class="card-body d-flex justify-content-between align-items-center">

                <div>
                    <h5>Order #{{ order.id }}</h5>

                    <p>
                        Status:
                        {% if order.status == 'pending' %}
                            <span class="badge bg-warning text-dark">Pending</span>
                        {% elif order.status == 'shipped' %}
                            <span class="badge bg-info">Shipped</span>
                        {% elif order.status == 'delivered' %}
                            <span class="badge bg-success">Delivered</span>
                        {% endif %}
                    </p>

                    <p class="mb-1">
                        Placed on: {{ order.created_at|date:"d M Y, h:i A" }}
                    </p>

                    <p class="fw-bold mb-0">
                        Total: â‚¹{{ order.total_amount }}
                    </p>
                </div>

                <div class="text-end">
                    <a href="{% url 'order_detail' order.id %}"
                       class="btn btn-primary btn-sm">
                        View Details
                    </a>

                    {% if order.status == 'pending' %}
                        <br><br>
                        <a href="{% url 'cancel_order' order.id %}"
                           class="btn btn-danger btn-sm"
                           onclick="return confirm('Are you sure you want to cancel this order?');">
                            Cancel Order
                        </a>
                    {% elif order.status == 'shipped' %}
                        <br><br>
                        <span class="text-muted small">
                            Order shipped ðŸšš
                        </span>
                    {% elif order.status == 'delivered' %}
                        <br><br>
                        <span class="text-success small">
                            Order delivered âœ”
                        </span>
                    {% endif %}
                </div>

            </div>
        </div>
    {% empty %}
        <div class="alert alert-info">
            No orders found.
        </div>
    {% endfor %}

</div>

{% endblock %}
