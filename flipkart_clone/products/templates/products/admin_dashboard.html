{% extends 'base.html' %}
{% block content %}

<div class="container mt-4">
    <h2 class="mb-4">Admin Dashboard - Product Approvals</h2>

    {% for product in products %}
    <div class="card mb-4 shadow-sm p-3">
        <div class="row align-items-center">

            <!-- Thumbnails -->
            <div class="col-md-2 d-flex flex-column gap-2">
                {% if product.image_front %}
                <img src="{{ product.image_front.url }}" class="thumb-img">
                {% endif %}
                {% if product.image_back %}
                <img src="{{ product.image_back.url }}" class="thumb-img">
                {% endif %}
                {% if product.image_left %}
                <img src="{{ product.image_left.url }}" class="thumb-img">
                {% endif %}
                {% if product.image_right %}
                <img src="{{ product.image_right.url }}" class="thumb-img">
                {% endif %}
            </div>

            <!-- Main Image -->
            <div class="col-md-5 text-center">
                {% if product.image_front %}
                <img src="{{ product.image_front.url }}" class="main-img">
                {% endif %}
            </div>

            <!-- Product Details -->
            <div class="col-md-5">
                <h5 class="fw-bold">{{ product.name }}</h5>
                <p class="fw-bold text-success mb-1">â‚¹ {{ product.price }}</p>

                <p class="text-muted mb-1">
                    Seller: {{ product.seller.username }}
                </p>

                <!-- Status -->
                <span class="badge
                    {% if product.status == 'approved' %} bg-success
                    {% elif product.status == 'pending' %} bg-warning text-dark
                    {% else %} bg-danger
                    {% endif %}">
                    {{ product.status|capfirst }}
                </span>

                <!-- Buttons -->
                {% if product.status == 'pending' %}
                <div class="mt-3">
                    <a href="{% url 'approve_product' product.id %}" class="btn btn-sm btn-success me-2">
                        Approve
                    </a>
                    <a href="{% url 'reject_product' product.id %}" class="btn btn-sm btn-danger">
                        Reject
                    </a>
                </div>
                {% endif %}
            </div>

        </div>
    </div>
    {% empty %}
    <p class="text-muted">No products to review.</p>
    {% endfor %}
</div>

<!-- CSS -->
<style>
/* Thumbnail Images */
.thumb-img {
    width: 90px;
    height: 90px;
    object-fit: cover;
    border-radius: 6px;
    border: 1px solid #ddd;
    cursor: pointer;
    background: #fff;
}

/* Main Image */
.main-img {
    width: 100%;
    max-width: 350px;
    height: 350px;
    object-fit: contain;
    border-radius: 10px;
    border: 1px solid #e0e0e0;
    background: #fff;
    padding: 8px;
}

/* Card Hover Effect */
.card {
    transition: transform 0.3s ease;
}
.card:hover {
    transform: scale(1.01);
}
</style>

{% endblock %}
